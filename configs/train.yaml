defaults:
  - _self_

hydra:
  job:
    chdir: false
  run:
    dir: outputs/${now:%Y-%m-%d}/${now:%H-%M-%S}

seed: 1337

device:
  prefer_mps: true

data:
  train_manifest: data/manifests/train.jsonl
  val_manifest: data/manifests/val.jsonl
  force_rgb: true
  batch_size: 8
  num_workers: 4
  pin_memory: true
  prefetch_factor: 2
  persistent_workers: true
  crop_size: 256
  crop_mode: random
  val_crop_mode: center
  hflip_prob: 0.5

model:
  name: unet
  in_channels: 6
  out_channels: 3
  base_channels: 64
  depth: 4
  residual: false
  residual_t: 0.5
  vit:
    patch_size: 16
    embed_dim: 256
    depth: 6
    num_heads: 8
    mlp_ratio: 4.0
    dropout: 0.0
    decoder_channels: 128
    decoder_depth: 2
    decoder_upsample: bilinear

optimizer:
  lr: 1.0e-4
  weight_decay: 1.0e-4

scheduler:
  name: cosine
  warmup_epochs: 1
  min_lr: 1.0e-6

train:
  epochs: 20
  val_every: 1
  val_interval_steps: 0
  save_last: true
  save_best: true
  best_metric: val_loss
  grad_clip_norm: 1.0
  amp: true
  clamp_output: true

logging:
  log_dir: null
